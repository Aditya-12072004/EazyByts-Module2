<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="css/style.css">
    
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script> 
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Trading Dashboard</h1>
            
            <a href="learn.html" style="margin-right: 15px; color: #00ff7f; text-decoration: underline;">ðŸ“š Learn Trading</a>
            
            <p>Your Balance: <span id="userBalance"></span></p>
            <button id="logoutBtn">Logout</button>
        </div>

        <div class="section">
            <h2>Performance Analytics</h2>
            <p>Total Profit/Loss: <span id="totalPnl">Loading...</span></p>
            
            <div style="width: 100%; height: 300px;">
                <canvas id="pnlChart"></canvas>
            </div>
        </div>

        <div class="section">
            <h2>Portfolio</h2>
            <table id="portfolioTable">
                <thead>
                    <tr>
                        <th>Symbol</th>
                        <th>Quantity</th>
                        <th>Avg. Price</th>
                    </tr>
                </thead>
                <tbody>
                    </tbody>
            </table>
        </div>

        <div class="section">
            <h2>Trade Stocks</h2>
            <form id="tradeForm">
                <input type="text" id="stockSymbol" placeholder="Stock Symbol" required>
                <input type="number" id="quantity" placeholder="Quantity" required min="1">
                <p id="livePrice"></p>
                <button type="submit" id="buyBtn">Buy</button>
                <button type="submit" id="sellBtn">Sell</button>
            </form>
            <div id="tradeMessage" class="message-box"></div>
        </div>
        
        <div class="section">
            <h2>Algorithmic Backtesting</h2>
            <form id="backtestForm">
                <input type="text" id="backtestSymbol" placeholder="Stock Symbol (e.g., AAPL)" required>
                
                <select id="strategyName" required>
                    <option value="">-- Select Strategy --</option>
                    <option value="SMA_CROSSOVER">SMA Crossover</option>
                </select>
                
                <label for="periodShort">Short MA Period (Days):</label>
                <input type="number" id="periodShort" value="20" required min="1">
                
                <label for="periodLong">Long MA Period (Days):</label>
                <input type="number" id="periodLong" value="50" required min="1">
                
                <label for="startDate">Start Date:</label>
                <input type="date" id="startDate" required>
                
                <label for="endDate">End Date:</label>
                <input type="date" id="endDate" required>
                
                <button type="submit" id="runBacktestBtn">Run Backtest</button>
            </form>
            
            <div id="backtestResult" class="message-box"></div>
            
            <div style="width: 100%; height: 350px; margin-top: 20px;">
                <canvas id="backtestChart"></canvas>
            </div>
        </div>
        
    </div>
    <script src="js/script.js"></script>
</body>
</html>